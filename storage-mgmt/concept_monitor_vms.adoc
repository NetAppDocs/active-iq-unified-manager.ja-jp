---
permalink: storage-mgmt/concept_monitor_vms.html 
sidebar: sidebar 
keywords: monitor, virtual, machines, view, summary, topology, expand 
summary: 仮想マシン（ VM ）のアプリケーションでレイテンシ問題が発生した場合、原因の分析とトラブルシューティングのために VM の監視が必要になることがあります。VM を使用できるのは、 vCenter Server と、 VM ストレージをホストする ONTAP クラスタを Unified Manager に追加したときです。 
---
= 仮想マシンの監視
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
仮想マシン（ VM ）のアプリケーションでレイテンシ問題が発生した場合、原因の分析とトラブルシューティングのために VM の監視が必要になることがあります。VM を使用できるのは、 vCenter Server と、 VM ストレージをホストする ONTAP クラスタを Unified Manager に追加したときです。

VM の詳細は、 * vmware * >> * Virtual Machines * ページに表示されます。可用性、ステータス、使用済み容量と割り当て済み容量、ネットワークレイテンシ、 VM 、データストア、ホストの IOPS とレイテンシなどの情報が表示されます。複数のデータストアをサポートしている VM の場合は、最もレイテンシが高いデータストアの指標がグリッドに表示され、追加のデータストアを示すアスタリスクアイコン（ * ）が付きます。アイコンをクリックすると、追加データストアの指標が表示されます。これらの列の一部は、ソートやフィルタに使用できません。

[NOTE]
====
VM とその詳細を表示するには、 ONTAP クラスタの検出（ポーリングまたは指標の収集）が完了している必要があります。クラスタが Unified Manager から削除されると、次の検出サイクルのあとで VM を使用できなくなります。

====
このページから、 VM の詳細なトポロジを確認し、ホスト、仮想ディスク、データストアなど、 VM が関連するコンポーネントを表示することもできます。トポロジビューには、基になるコンポーネントが各レイヤの次の順序で表示されます。 * Virtual Disk * > * VM * > * Host * > * Network * > * Datastore * > * VMDK * 。

I/O パスとコンポーネントレベルのレイテンシをトポロジの観点から確認し、パフォーマンス問題の原因かどうかを判断できます。トポロジのサマリビューには I/O パスが表示され、解決手順を特定できるように IOPS やレイテンシの問題があるコンポーネントが強調表示されます。また、トポロジの展開ビューで、各コンポーネントとそのコンポーネントのレイテンシを個別に確認することもできます。コンポーネントを選択すると、レイヤ内で強調表示されている I/O パスを確認できます。



== トポロジのサマリビューの表示

トポロジのサマリビューで VM を表示してパフォーマンスの問題を特定するには、次の手順を実行します。

. 「 * vmware * > * Virtual Machines * 」に移動します。
. 検索ボックスに名前を入力して VM を検索します。また、 * フィルター * ボタンをクリックして、特定の条件に基づいて検索結果をフィルターすることもできます。ただし、 VM が見つからない場合は、対応する vCenter Server が追加されて検出されていることを確認してください。
+
[NOTE]
====
vCenter Server で使用できる特殊文字（ % 、 & 、 * 、 $ 、 # 、 @ 、！、 \ 、 / 、：、 * 、 ? 、 " 、 < 、 > 、 | 、；、 ' ）を使用して、 VM 、クラスタ、データストア、フォルダ、 または file です。VMware vCenter Server および ESX/ESXi Server では、表示名に使用される特殊文字はエスケープされません。ただし、 Unified Manager で処理される名前は異なって表示されます。たとえば、 vCenter Server で「 %$VC_AIQUM_CLOK_191124% 」という名前の VM は、 Unified Manager では「 %25$VC_AIQUM_CLONE _191124% 25 」と表示されます。名前に特殊文字が含まれる VM を照会する場合は、この問題をメモしておく必要があります。

====
. VM のステータスを確認します。VM のステータスは vCenter Server から取得されます。ステータスは次のいずれかです。これらのステータスの詳細については、 VMware のドキュメントを参照してください。
+
** 正常
** 警告
** アラート
** 監視対象外
** 不明です


. VM の横にある下矢印をクリックすると、コンピューティング、ネットワーク、ストレージの各レイヤにあるコンポーネントのトポロジのサマリビューが表示されます。レイテンシの問題があるノードは強調表示されます。サマリビューには、コンポーネントのワーストレイテンシが表示されます。たとえば、 VM に複数の仮想ディスクがある場合、すべての仮想ディスクの中で最もレイテンシが高い仮想ディスクが表示されます。
. 一定期間にわたるデータストアのレイテンシとスループットを分析するには、データストアオブジェクトアイコンの上にある * Workload Analyzer * ボタンをクリックします。ワークロード分析ページに移動して、期間を選択し、データストアのパフォーマンスチャートを表示できます。Workload Analyzer の詳細については、 Workload Analyzer を使用したワークロードのトラブルシューティング _ を参照してください。




== トポロジの展開ビューの表示

VM のトポロジの展開ビューでは、各コンポーネントにドリルダウンして個別に確認することができます。

.手順
. トポロジのサマリビューで、 [* トポロジの展開 *] をクリックします。各コンポーネントの詳細なトポロジが個別に表示され、各オブジェクトのレイテンシを確認できます。データストアまたは VMDK に複数のノードが含まれているカテゴリでは、レイテンシが最も低いノードが赤で強調表示されます。
. 特定のオブジェクトの IO パスを確認するには、そのオブジェクトをクリックして IO パスと対応するマッピングを確認します。たとえば、仮想ディスクのマッピングを表示するには、仮想ディスクをクリックして、対応する VMDK への強調表示されたマッピングを表示します。これらのコンポーネントのパフォーマンスが低下した場合は、 ONTAP からさらに多くのデータを収集し、問題のトラブルシューティングを行うことができます。
+
[NOTE]
====
VMDK については指標は報告されません。トポロジでは、 VMDK 名のみ表示され、指標は表示されません。

====


* 関連情報 *

link:../performance-checker/concept_troubleshooting_workloads_using_workload_analyzer.html["Workload Analyzer を使用したワークロードのトラブルシューティング"]
